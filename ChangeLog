2005-04-21  Albert Chu  <chu11@llnl.gov>

	* src/libcerebro/cerebro_error.h, src/libcerebro/cerebro_error.c:
	New files.

	* src/cerebrod/cerebrod_error.h, src/cerebrod/cerebrod_error.c:
	Removed files.
	
	Reworked error output based on new cerebro_error library API.

	Code cleanup throughout.

	Added mapping to cerebrod and modules.
	
2005-04-20  Albert Chu  <chu11@llnl.gov>

	Partitioned clusterlist and config modules into separate dir.
	Major Changes throughout.
	
2005-04-20  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_clusterlist_gendersllnl.c
	(gendersllnl_clusterlist_init): Added genders indexing.

	* config/ac_gendersllnl.m4: Check for genders indexing.

	* src/libcommon/Makefile.am: Put libwrappers and libcommon back
	into just libcommon.

	* src/cerebrod/Makefile.am,
	src/cerebrod/cerebrod_clusterlist_gendersllnl.c,
	src/cerebrod/cerebrod_clusterlist_genders.c,
	src/cerebrod/cerebrod_clusterlist_hostsfile.c,
	src/cerebrod/cerebrod_clusterlist_none.c,
	src/cerebrod/cerebrod_clusterlist_util.h,
	src/cerebrod/cerebrod_clusterlist_utilc,
	src/cerebrod/cerebrod_clusterlist_genders_util.h,
	src/cerebrod/cerebrod_clusterlist_genders_util.c: Remove symbols
	exporting, force all modules to hae the symbols they require.
	Made appropriate changes to support this.

2005-04-01  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_clusterlist_genders.c
	(genders_clusterlist_node_in_cluster),
	src/cerebrod/cerebrod_clusterlist_gendersllnl.c
	(gendersllnl_clusterlist_get_nodename,
	gendersllnl_clusterlist_node_in_cluster): Use buffer instead of
	strdup for shortening the nodename.
	
2005-03-31  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/Makefile.am: modulelib dir based on module dir
	determined in autoconf.
	
2005-03-30  Albert Chu  <chu11@llnl.gov>

	* Minor code cleanup throughout

	* src/cerebrod/cerebrod_updown.c (cerebrod_updown_update_data):
	Fix race condition.

	* configure.ac, src/libcerebro/Makefile.am: Add library
	versioning.

	* src/libcerebro/cerebro.map: New file.

	* src/libcerebro/Makefile.am: Add symbol export map.

	* Globally rename hostname to nodename.  Rename 'node' variables
	to 'nodename' variables.
	
2005-03-29  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_error.h, src/cerebrod/cerebrod_error.c
	(cerebrod_err_init, cerebrod_err_get_flags,
	cerebrod_err_set_flags, cerebrod_err_output, cerebrod_err_exit):
	New functions.

	* src/cerebrod/: Globally use new err functions appropriately and
	various code cleanup.
	
2005-03-29  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_config.c (cerebrod_config_cleanup): Fix
	static modules bug.

	* src/cerebrod/cerebrod_config.c (_cerebrod_config_parse): Minor
	debugging fix.
	
	* src/cerebrod/cerebrod_updown.c
	(_cerebrod_updown_send_node_responses): New function.
	
	* src/libcerebro/cerebro_updown_protocol.h,
	src/cerebrod/cerebrod_updown.c
	(_cerebrod_updown_request_marshall,
	_cerebrod_updown_evaluate_updown_state,
	_cerebrod_updown_respond_with_updown_nodes): Continued work to
	complete updown server functionality.

	* src/cerebrod/cerebrod_error.h, src/cerebrod/cerebrod_error.c:
	New files.

	* src/cerebrod/: Globally use cerebrod_err_debug instead of
	err_debug when appropriate.

	* src/libcommon/Makefile.am, src/cerebrod/Makefile.am: Split off
	libcommon libraries into libcommon and libwrappers.

	* src/cerebrod/cerebrod.c (main): Fix spinning loop issue.

	* src/libcerebro/cerebro_updown_protocol.h: Define default server port.

	* src/cerebrod/cerebrod_config.h: Use defined default server port.

	* src/cerebrod/cerebrod_speaker.c (_cerebrod_speaker_initialize):
	Improve initialization routine.

	* src/libcommon/wrappers.h, src/libcommon/wrappers.c: Add function
	name output to wrappers.
	
2005-03-28  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_updown.c
	(_cerebrod_updown_evaluate_updown_state): Continued work.
	
2005-03-27  Albert Chu  <chu11@llnl.gov>

	* src/libcerebro/cerebro_marshalling.h,
	src/libcerebro/cerebro_marshalling.c (cerebro_marshall_int8,
	cerebro_marshall_uint8, cerebro_unmarshall_int8,
	cerebro_unmarshall_uint8): New functions.

	* src/cerebrod/cerebrod_updown.c
	(_cerebrod_updown_evaluate_updown_state,
	_cerebrod_updown_respond_with_node,
	_cerebrod_updown_respond_with_updown_nodes,
	_cerebrod_updown_send_response): New functions.
	
2005-03-26  Albert Chu  <chu11@llnl.gov>

	* src/libcommon/wrappers.h, src/libcommon/wrappers.c (Listen,
	Accept, Select, Poll, wrap_listen, wrap_accept, wrap_select,
	wrap_poll): New macros and functions.

	* src/cerebrod/cerebrod_updown.c
	(_cerebrod_updown_respond_with_error,
	_cerebrod_updown_request_dump, _cerebrod_updown_receive_request,
	_cerebrod_updown_request_unmarshall,
	_cerebrod_updown_response_marshall): New functions.

	* src/cerebrod/cerebrod_updown.c
	(_cerebrod_updown_service_connection): Use new functions.
	
	* src/libcerebro/cerebrod_updown_protocol.h: Minor cleanup.

	* src/cerebrod/cerebrod_config.c (cerebrod_config_cleanup): Fix
	dl_handle bug.
	
2005-03-25  Albert Chu  <chu11@llnl.gov>

	* src/libcommon/wrappers.h, src/libcommon/wrappers.c
	(Gethostbyname, Inet_ntop, wrap_gethostbyname, wrap_inet_ntop):
	New macros and functions.

	* src/cerebrod/cerebrod_config_gendersllnl.c
	(gendersllnl_config_load_default): Add altname support.

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c
	(cerebrod_config_cleanup): New function.

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c
	(cerebrod_config): Rename to cerebrod_config_setup.

	* src/cerebrod/cerebrod.c (main): Update for function name change.

	* src/cerebrod/cerebrod_config.c (_config_load_dynamic_module,
	_cerebrod_config_module_setup): Remove calls to Lt_dlclose and
	Lt_dlexit, so config module is kept upon on exit.

	* src/libcerebro/cerebro_defs.h,
	src/libcerebro/cerebrod_heartbeat_protocol.h,
	src/libcerebro/cerebro_updown_protocol.h: New files.
	
	* src/cerebrod/: Re-work for new header files and variable renaming.

	* src/libcerebro/cerebro_marshalling.h,
	src/libcerebro/cerebro_marshalling.c: New files.

	* src/cerebrod/cerebrod_heartbeat.c: Re-worked for use of new library functions.

	* src/cerebrod/Makefile.am: Updated for new library.
	
2005-03-23  Albert Chu  <chu11@llnl.gov>

	Begin work on libcerebro

	* src/libcerebro/Makefile.am,
	src/libcerebro/cerebrod_config_module.h,
	src/libcerebro/cerebrod_clusterlist.h: New files.

	* configure.ac, src/Makefile.am: Updated for new files and directories.

	* src/libcommon/fd.c (fd_write_n): Remove warnings.

	* src/cerebrod/cerebrod_clusterlist.h: Remove useless headers.

	* src/cerebrod/cerebrod_clusterlist_utils.c: Fix header problems.

	* src/cerebrod/cerebrod_config.h,
	src/cerebrod/cerebrod_clusterlist.h: Removed definitions and
	declarations due to new ones in
	src/libcerebro/cerebrod_config_module.h and
	src/libcerebro/cerebrod_clusterlist.h.

	* src/cerebrod/cerebrod_config.c,
	src/cerebrod_config_gendersllnl.c
	src/cerebrod/cerebrod_clusterlist.c,
	src/cerebrod/cerebrod_clusterlist_none.c,
	src/cerebrod_clusterlist_hostsfile.c,
	src/cerebrod_clusterlist_genders.c,
	src/cerebrod_clusterlist_gendersllnl.c: Include new headers as
	needed.

	* src/cerebrod/cerebrod_config.c
	(_cerebrod_load_alternate_configuration): Reworked as needed for
	by new headers.

2005-03-22  Albert Chu  <chu11@llnl.gov>

	More code cleanup

	* src/cerebrod/cerebrod_static_modules.c,
	src/cerebrod/cerebrod_dynamic_modules.h,
	src/cerebrod/cerebrod_dynamic_modules.c: New files.

	* src/cerebrod/Makefile.am: Re-worked for new files appropriately.

	* src/cerebrod/cerebrod_config.c
	(_cerebrod_find_static_config_module,
	_cerebrod_find_static_clusterlist_module): Removed due to new
	common functions in src/cerebrod/cerebrod_static_modules.c.

	* src/cerebrod/cerebrod_config.c: Removed static_config_modules
	and config_modules arrays due to new ones stored in
	src/cerebrod/cerebrod_static_modules.c and
	src/cerebrod/cerebrod_dynamic_modules.c.

	* src/cerebrod/cerebrod_clusterlist.c: Removed
	static_clusterlist_modules and clusterlist_modules arrays due to
	new ones stored in src/cerebrod/cerebrod_static_modules.c and
	src/cerebrod/cerebrod_dynamic_modules.c.

	* src/cerebrod/cerebrod_util.h, src/cerebrod/cerebrod_util.c
	(cerebrod_search_dir_for_module): Moved into
	src/cerebrod/cerebrod_dynamic_modules.h and
	src/cerebrod/cerebrod_dynamic_modules.c.

	* src/cerebrod/cerebrod_config.c,
	src/cerebrod/cerebrod_clusterlist.c: Use common functions for
	effectively overall.  Fix for new variable and function names.

	* src/cerebrod/cerebrod_config.c (_cerebrod_cmdline_parse_check):
	Fix bug.

2005-03-21  Albert Chu  <chu11@llnl.gov>
	
	Static module compilation code cleanup

	* Globally remove config_type and clusterlist_type.  Everything
	will be referred to as modules, despite being compiled statically
	or not.

	* config/ac_static_modules.m4: Turn --with-static-modules to
	--enable-static-modules.

	* man/cerebrod.8.in, man/cerebrod.conf.5.in: Updated with static
	modules wording.

	* src/cerebrod/cerebrod_config.c (_cerebrod_find_static_module,
	_cerebrod_load_alternate_configuration,
	_cerebrod_find_static_clusterlist_module) New functions.

	* src/cerebrod/cerebrod_config.c (_config_load_static_modulem,
	_config_load_module, _cerebrod_cmdline_parse_check,
	_cerebrod_pre_calculate_configuration_config_check): Use new
	common functions.

	* src/cerebrod/cerebrod_config.c (_cerebrod_config_module_setup):
	Add null pointer check.

	* src/cerebrod/cerebrod_clusterlist.c
	(_clusterlist_check_module_data): New function.

	* src/cerebrod/cerebrod_clusterlist.c
	(_clusterlist_load_static_module, _clusterlist_load_module): Use
	new common functions.

2005-03-21  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_clusterlist.h: Modified
	Cerebrod_clusterlist_get_nodename prototype to take a unsigned int
	buflen instead of an int buflen.

	* src/cerebrod/cerebrod_clusterlist.c,
	src/cerebrod/cerebrod_clusterlist_none.c,
	src/cerebrod_clusterlist_hostsfile.c,
	src/cerebrod_clusterlist_genders.c,
	src/cerebrod_clusterlist_gendersllnl.c,
	src/cerebrod_clusterlist_util.h,
	src/cerebrod/cerebrod_clusterlist_util.c: Modified for changed
	parameter type.

	* src/: Added more commenting throughout and various code cleanup

	* src/cerebrod/cerebrod_clusterlist_hostsfile.c
	(_remove_comments): Fix loop bug.

	* config/ac_genders.m4, config/ac_gendersllnl.m4: Make genders and
	gendersllnl auto-configurable on or off.  Various cleanup.

	* configure.ac: Support cleanup.

	Support static module compilation

	* config/ac_static_modules.m4: New file.

	* configure.ac: Add static modules option.

	* src/cerebrod/cerebrod_config.h: Collapse struct
	cerebrod_config_module_ops into struct
	cerebrod_config_module_info.

	* src/cerebrod/cerebrod_config.c (_config_load_module),
	src/cerebrod/cerebrod_config_gendersllnl.c: Updated for structure
	changes.
	
	* src/cerebrod/cerebrod_clusterlist.h: Collapse struct
	cerebrod_clusterlist_module_ops into struct
	cerebrod_clusterlist_module_info.

	* src/cerebrod/cerebrod_clusterlist.c (_clusterlist_load_module),
	src/cerebrod_clusterlist_hostsfile.c,
	src/cerebrod_clusterlist_genders.c,
	src/cerebrod_clusterlist_gendersllnl.c,
	src/cerebrod_clusterlist_util.h: Updated for structure changes.

	* src/cerebrod/cerebrod_config.h: Add config_type and
	clusterlist_type and clusterlist_type_options to struct
	cerebrod_config.

	* src/cerebrod/cerebrod_config.c (_cerebrod_config_default):
	Initialize new variables appropriately.

	* src/cerebrod/cerebrod_config.c (_usage, _cerebrod_cmdline_parse,
	_cerebrod_cmdline_parse_check): Appropriately output, parse, and
	check new config_type option.

	* src/cerebrod/cerebrod_config.c (_config_load_static_module): New
	function.

	* src/cerebrod/cerebro_config.c (_cerebrod_config_module_setup):
	Call static or dynamic module loader appropriately.

	* src/cerebrod/cerebrod_config.c (_cb_module_options): Renamed
	_cb_options.

	* src/cerebrod/cerebrod_config.c (_cerebrod_config_parse): Parse
	clusterlist_type and clusterlist_type_options configuration
	options.

	* src/cerebrod/cerebrod_config.c
	(_cerebrod_calculate_clusterlist_module): Check static modules
	list appropriately.

	* src/cerebrod/cerebrod_clusterlist.c
	(_clusterlist_load_static_module): New function.

	* src/cerebrod/cerebrod_clusterlist.c
	(cerebrod_clusterlist_setup): Support static modules.

	* src/libcommon/Makefile.am, src/libcommon/wrappers.h,
	src/libcommon/wrappers.c: Don't compile ltdl when compiling
	statically.

	* src/cerebrod/cerebrod_clusterlist_genders.c,
	src/cerebrod/cerebrod_clusterlist_gendersllnl.c: Rename some
	globals to stop name clobbering on static builds.

	* src/cerebrod/cerebrod_static_modules.h: New file.
	
2005-03-20  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_config.c
	(_cerebrod_pre_calculate_configuration_config_check): Add port
	checks.

	* src/cerebrod/cerebrod_config.h: New default ports.

	* man/cerebrod.conf.5.in: Completed first draft.

	* src/cerebrod/cerebrod_config.c (_config_load_module),
	src/cerebrod/cerebrod_clusterlist.c (_clusterlist_load_module):
	Add additional module loading checks.

	* src/cerebrod/cerebrod_clusterlist.c
	(cerebrod_clusterlist_setup): Fix filename bug.

	* src/cerebrod/cerebrod_config.c (_cerebrod_config_module_setup,
	_cerebrod_cmdline_parse_check): Fix logic error in check/load
	routines.  Rename "configfile" and "configmodule" to "config_file"
	and "config_module" globally respectively.

	* src/cerebrod/cerebrod_config.c (_cerebrod_config_dump): Add
	forgotten field.

	* src/cerebrod/cerebrod_cache.h, src/cerebrod/cerebrod_cache.c:
	Renamed to cerebrod_system_data.h and cerebrod_system_data.c.  API
	modified appropriately and changed globally.

	* src/cerebrod/: Added significant commenting and documentation
	throughout code and various cleanup.

2005-03-19  Albert Chu  <chu11@llnl.gov>

	* Fixed variety of compiler warnings.

	* man/cerebro.1.in: New file.
	
	* configure.ac, man/Makefile.am: Updated for new manpages.

	* config/ac_cerebrod_configfile.m4: New file.

	* configure.ac: Add ac_cerebrod_configfile config option.

	* config/ac_hostsfile.m4: AC_SUBST the hostsfile.

	* config/ac_cerebrod_module_dir.m4: New file.

	* configure.ac, src/cerebrod/Makefile.am: CEREBROD_MODULE_DIR now
	defined by AC_CEREBROD_MODULE_DIR.

	* src/cerebrod/cerebrod_util.h, src/cerebrod/cerebrod_util.c
	(cerebrod_search_dir_for_module): Include modules list length.

	* src/cerebrod/cerebrod_config.c (_cerebrod_config_module_setup),
	src/cerebrod/cerebrod_clusterlist.c (cerebrod_clusterlist_setup):
	Support new cerebrod_search_dir_for_module interface.

	* man/cerebrod.8.in: Completed first draft.

	* config/ac_genders.m4, config/ac_gendersllnl.m4: Add manpage
	substitution flags.
	
2005-03-18  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_config.c (_cerebrod_config_module_setup,
	_find_config_module, _search_dir, _load_module): New functions.

	* src/cerebrod/cerebrod_config.c (cerebrod_config): Call
	_cerebrod_config_module_setup.

	* src/cerebrod/cerebrod_config_gendersllnl.c: New file.

	* src/cerebrod/Makefile.am: Adjusted for new module.

	* src/cerebrod/cerebrod_clusterlist_genders.c
	(genders_clusterlist_init),
	src/cerebrod/cerebrod_clusterlist_gendersllnl.c
	(gendersllnl_clusterlist_init): Fix argument param bug.

	* src/cerebrod/cerebrod_clusterlist.c
	(cerebrod_clusterlist_parse_options): Fix assertion bug.

	* src/cerebrod/cerebrod_config.c
	(_cerebrod_post_calculate_configuration_config_check),
	src/cerebrod/cerebrod.c (_cerebrod_post_config_initialization):
	Move option parsing from
	_cerebrod_post_calculate_configuration_config_ to
	_cerebrod_post_config_initialization.

	* src/cerebrod/cerebrod_config.c (_cerebrod_config_dump): Fix
	clusterlist_module_options output.

	* src/cerebrod/cerebrod_config.c (_cerebrod_cmdline_parse_check):
	New function.

	* src/cerebrod/cerebrod_config.c (cerebrod_config): Call
	_cerebrod_cmdline_parse_check.

	* src/cerebrod/cerebrod_util.h, src/cerebrod/cerebrod_util.c
	(cerebrod_search_dir_for_module): New function.

	* src/cerebrod/cerebrod_config.c (_find_config_module),
	src/cerebrod/cerebrod_clusterlist.c (_find_clusterlist_module):
	Removed functions.

	* src/cerebrod/cerebrod_config.c (_load_module),
	src/cerebrod/cerebrod_clusterlist.c (_load_module): Return 1 on
	sucess.

	* src/cerebrod/cerebrod_config.c (_cerebrod_config_module_setup),
	src/cerebrod/cerebrod_clusterlist.c (cerebrod_clusterlist_setup):
	Use new cerebrod_search_dir_for_module.

	* src/cerebrod/cerebrod_config.c (_load_module): Globally rename
	to _config_load_module.

	* src/cerebrod/cerebrod_clusterlist.c (_load_module): Globally
	rename to _clusterlist_load_module.

	* man/cerebrod.8.in, man/cerebrod/cerebrod.conf.5.in: New files.

	* configure.ac, man/Makefile.am: Updated for new manpages.

2005-03-17  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_clusterlist_genders.c
	(_parse_options),
	src/cerebrod/cerebrod_clusterlist_gendersllnl.c
	(_parse_options): Fix cut and paste typos.

	* src/cerebrod/cerebrod_clusterlist.c (_load_module, _search_dir):
	Fix logic errs in search paths.

	Re-architect option parsing logic.

	* src/cerebrod/cerebrod_clusterlist_util.h,
	src/cerebrod/cerebrod_clusterlist_util.c: New files.
	
	* src/cerebrod/cerebrod_clusterlist_hostsfile.c (_parse_options),
	src/cerebrod/cerebrod_clusterlist_genders.c
	(_parse_options), src/cerebrod/cerebrod_clusterlist_gendersllnl.c
	(_parse_options): Removed functions.

	* src/cerebrod/cerebrod_clusterlist.h,
	src/cerebrod/cerebrod_clusterlist.c,
	src/cerebrod/cerebrod_clusterlist_none.c,
	src/cerebrod/cerebrod_clusterlist_hostsfile.c,
	src/cerebrod/cerebrod_clusterlist_genders.c,
	src/cerebrod/cerebrod_clusterlist_gendersllnl.c: Change
	cerebrod_clusterlist_ops to cerebrod_clusterlist_module_ops
	globally.

	* src/cerebrod/cerebrod_clusterlist.h: New
	Cerebrod_clusterlist_parse_options typedef.  Added
	Cerebrod_clusterlist_parse_options into
	cerebrod_clusterlist_module_ops.  New
	cerebrod_clusterlist_module_info definition.  

	* src/cerebrod/cerebrod_clusterlist.c (_load_module): Search and
	load clusterlist_module_info symbol.

	* src/cerebrod/cerebrod_clusterlist.h,
	src/cerebrod/cerebrod_clusterlist.c
	(cerebrod_clusterlist_parse_options): New function.

	* src/cerebrod/cerebrod_clusterlist_none.c
	(none_clusterlist_parse_options),
	src/cerebrod/cerebrod_clusterlist_hostsfile.c
	(hostsfile_clusterlist_parse_options),
	src/cerebrod/cerebrod_clusterlist_genders.c
	(genders_clusterlist_parse_options),
	src/cerebrod/cerebrod_clusterlist_gendersllnl.c
	(gendersllnl_clusterlist_parse_options): New functions.

	* src/cerebrod/cerebrod_config.c
	(_cerebrod_post_calculate_configuration_config_check): Call
	cerebrod_clusterlist_parse_options.

	* src/cerebrod/cerebrod.c (_cerebrod_post_config_initialization):
	Ignore SIGPIPE if we are running any servers.

	* src/cerebrod/cerebrod_clusterlist_util.h,
	src/cerebrod/cerebrod_clusterlist_util.c
	(cerebrod_clusterlist_copy_nodename): New function.
	
	* src/cerebrod/cerebrod_clusterlist_none.c
	(none_clusterlist_get_nodename),
	src/cerebrod/cerebrod_clusterlist_hostsfile.c
	(hostsfile_clusterlist_get_nodename),
	src/cerebrod/cerebrod_clusterlist_genders.c
	(genders_clusterlist_get_nodename): Use
	cerebrod_clusterlist_copy_nodename new.

	* src/cerebrod/cerebrod_clusterlist_genders_util.h,
	src/cerebrod/cerebrod_clusterlist_genders_util.c: New files.

	* src/cerebrod/cerebrod_clusterlist_genders.c,
	src/cerebrod/cerebrod_clusterlist_gendersllnl.c: Rework to use
	common functions in
	src/cerebrod/cerebrod_clusterlist_genders_util.c.

	* src/cerebrod/cerebrod_cache.c (_cerebrod_cache_hostname): No
	truncation needed anymore.

	* src/cerebrod: Globally change MAXHOSTNAMELEN to
	CEREBROD_MAXHOSTNAMELEN.  Don't depend on sys/param.h.

	* src/cerebrod/cerebrod_cache.c (_cerebrod_cache_hostname,
	cerebrod_get_hostname), src/cerebrod/cerebrod_listener.c
	(cerebrod_listener): Re-work so hostname could be
	CEREBROD_MAXHOSTNAMELEN in length exactly.  Null termination not
	required in the packet itself.

	* Begun initial work on config modules.
		
2005-03-16  Albert Chu  <chu11@llnl.gov>

	* src/libcommon/argv.h, src/libcommon/argv.c: Removed files.
	
	* src/libcommon/wrappers.h, src/libcommon/wrappers.c (Argv_create,
	Argv_destroy, wrap_argv_create, wrap_argv_destroy): Removed.

	* src/libcommon/Makefile.am: Updated appropriately.

	* src/cerebrod/cerebrod_config.h: Re-work
	clusterlist_module_cmdline into new clusterlist_module_options
	format.

	* src/cerebrod/cerebrod_config.c (_cb_cmdline): Renamed to
	_cb_module_options.

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c:
	Globally renamed clusterlist_module_cmdline to
	clusterlist_module_options.

	* src/cerebrod/cerebrod_clusterlist.h,
	src/cerebrod/cerebrod_clusterlist.c (cerebrod_clusterlist_init):
	Init is now based off a new options format.

	* src/cerebrod/cerebrod_clusterlist_hostsfile.c
	(_cmdline_parse), src/cerebrod/cerebrod_clusterlist_genders.c
	(_cmdline_parse), src/cerebrod/cerebrod_clusterlist_gendersllnl.c
	(_cmdline_parse): Re-worked into new _parse_options function.

	* src/cerebrod/cerebrod_clusterlist_hostsfile.c
	(hostsfile_clusterlist_init),
	src/cerebrod/cerebrod_clusterlist_genders.c
	(genders_clusterlist_init),
	src/cerebrod/cerebrod_clusterlist_gendersllnl.c
	(gendersllnl_clusterlist_init): Re-worked using new options format.

	* src/cerebrod/cerebrod_config.h: Add new clusterlist_module_file
	config calculation.

	* src/cerebrod/cerebrod_clusterlist.c
	(cerebrod_clusterlist_setup): Base on clusterlist_module_file
	config calculation.
	
	* src/cerebrod/cerebrod_config.c (_cerebrod_config_dump): Add
	debug for new clusterlist_module_file config calculation.

	* src/cerebrod/cerebrod_config.c
	(_cerebrod_calculate_clusterlist_module): new function.

	* src/cerebrod/cerebrod_config.c
	(_cerebrod_pre_calculate_configuration_config_check,
	_cerebrod_calculate_configuration): Move clusterlist module checks
	and calculation from
	_cerebrod_pre_calculate_configuration_config_check to
	_cerebrod_calculate_configuration.

	* src/cerebrod/cerebrod_clusterlist.c (_find_clusterlist_module):
	Fix logic bugs and also search current directory for modules.

	* src/cerebrod/cerebrod_clusterlist.c (_search_dir): New function

	* src/cerebrod/cerebrod_clusterlist.c (_find_clusterlist_module):
	Code cleanup.

2005-03-16  Albert Chu  <chu11@llnl.gov>

	* src/cerbrod/cerebrod_util.h, src/cerbrod/cerebrod_util.c: New
	files.

	* src/cerebrod/cerebrod_listener.c, src/cerebrod_updown.c: Re-work
	with new rehashing common functions.

	* src/cerebrod/Makefile.am: Updated with new files.

	* src/cerebrod/cerebrod_listener.c (cerebrod_listener),
	src/cerebrod/cerebrod.c
	(main): Call appropriate updown server functions.

	* src/cerebrod/cerebrod_clusterlist_genders.c
	(genders_clusterlist_node_in_cluster),
	src/cerebrod/cerebrod_clusterlist_gendersllnl.c
	(gendersllnl_clusterlist_node_in_cluster,
	gendersllnl_clusterlist_get_nodename): Fix memory corruption bug.

	* src/libcommon/wrappers.h, src/libcommon/wrappers.c
	(Pthread_cond_wait, Pthread_cond_signal, wrap_pthread_cond_wait,
	wrap_pthread_cond_signal): New macros and functions.

	* src/cerebrod/Makefile.am: Fix dynamic module symbol problems.

	* src/cerebrod/cerebrod_listener.c
	(_cerebrod_listener_initialization),
	src/cerebrod/cerebrod_updown.c (_cerebrod_updown_initialization),
	src/cerebrod/cerebrod.c (main): Fix pthread logic problem with
	condition variables.

	* src/libcommon/wrappers.c (wrap_list_for_each): Fix debug logic
	error.

	* src/libcommon/argv.h, src/libcommon/argv.c (argv_create,
	argv_destroy, _nextargv, _sizeargv): Re-worked not to use
	wrapper functions.

	* src/libcommon/wrappers.h, src/libcommon/wrappers.c (Argv_create,
	Argv_destroy, wrap_argv_create, wrap_argv_destroy): New macros and
	functions.

	* src/cerebrod/cerebrod_clusterlist_hostsfile.c
	(hostsfile_clusterlist_init),
	src/cerebrod/cerebrod_clusterlist_genders.c
	(genders_clusterlist_init),
	src/cerebrod/cerebrod_clusterlist_gendersllnl.c
	(gendersllnl_clusterlist_init): Use new Argv_create and
	Argv_destroy macros.

	* src/cerebrod/cerebrod_clusterlist_hostsfile.c
	(hostsfile_clusterlist_destroy, _cmdline_parse),
	src/cerebrod/cerebrod_clusterlist_genders.c
	(genders_clusterlist_destroy, _cmdline_parse),
	src/cerebrod/cerebrod_clusterlist_gendersllnl.c
	(gendersllnl_clusterlist_destroy, _cmdline_parse): Fix memory
	corruption logic error.

	* src/cerebrod/cerebrod_clusterlist_hostsfile.c
	(_cmdline_parse), src/cerebrod/cerebrod_clusterlist_genders.c
	(_cmdline_parse), src/cerebrod/cerebrod_clusterlist_gendersllnl.c
	(_cmdline_parse): Fix seg fault bug and getopt parsing bug.

	* src/cerebrod/cerebrod_config.c (_cb_cmdline): New function.
	
	* src/cerebrod/cerebrod_config.c (_cerebrod_config_parse): Use new
	_cb_cmdline appropriately.

2005-03-15  Albert Chu  <chu11@llnl.gov>

	Begin support of updown server.

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c
	(_cerebrod_config_parse,
	_cerebrod_pre_calculate_configuration_config_check): Add updown
	configuration support.

	* src/cerebrod/cerebrod_updown.h, src/cerebrod/cerebrod_updown.c: New files.

	Misc
	
	* src/libcommon/wrappers.c: Added mountains of additional error
	checks and debug info output.

	* src/cerebrod/cerebrod_listener.c
	(_cerebrod_listener_initialize): Initialize hash base on
	clusterlist numnodes count.

	* etc/Makefile.am, etc/cerebrod: New files.

	* configure.ac: Generate etc/Makefile.

	* Makefile.am: Add etc subdir.

	* src/libcommon/wrappers.h, src/libcommon/wrappers.c (_Free,
	List_count, wrap_list_count): New macros and functions.

	* src/cerebrod/cerebrod_clusterlist_hostsfile.c
	(hostsfile_clusterlist_init, hostsfile_clusterlist_finish): Rework
	using _Free.

	* src/cerebrod/cerebrod_clusterlist_hostsfile.c (_all): Removed function.

	* src/cerebrod/cerebrod_listener.c
	(_cerebrod_listener_initialize, _rehash): Rework using _Free.

	* src/cerebrod/cerbrod_updown.c
	(_cerebrod_listener_dump_cluster_node_data_hash): Remove
	Hash_count use, use cluster_data_hash_numnodes instead.

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c
	(_cerebrod_config_parse, _cerebrod_config_default): Added
	additional server debugging configuration flags.

	* src/cerebrod/cerebrod_speaker.c, src/cerebrod/cerebrod_listen.c,
	src/cerebrod_updown.c: Fix debug output based on new configuration
	parameters.

2005-03-14  Albert Chu  <chu11@llnl.gov>

	* src/libcommon/wrappers.h, src/libcommon/wrappers.c (Lt_dlinit,
	Lt_dlexit, wrap_lt_dlinit, wrap_lt_dlexit): New wrappers.

	* src/cerebrod/cerebrod_clusterlist.c (cerebrod_clusterlist_setup,
	cerebrod_clusterlist_cleanup): Use new wrappers.h

	* src/cerebrod/cerebrod_clusterlist_hostsfile.c: Completed work.

	* config/ac_hostsfile.m4: New file.

	* configure.ac: Updated to configure hostsfile default path.

	* src/libcommon/wrappers.h, src/libcommon/wrappers.c
	(List_delete_all, List_for_each, wrap_list_delete_all,
	wrap_list_for_each): New functions.

	* src/cerebrod/cerebrod_clusterlist_none.c: New file.

	* src/cerebrod/Makefile.am: Update with none module.

	* src/cerebrod/cerebrod_listener.c (cerebrod_listener): Add
	clusterlist support.

	* src/cerebrod/cerebrod_clusterlist_none.c: New file.

	* Makefile.am: Updated with new module.
	
2005-03-13  Albert Chu  <chu11@llnl.gov>

	Add initial support for masterlist mechanisms.
	
	* config/libtool.m4, config/ac_genders.m4,
	config/ac_gendersllnl.m4, src/libcommon/argv.h,
	src/libcommon/argv.c, src/libcommon/ltdl.h,
	src/libcommon/ltdl.c,src/cerebrod/cerebrod_clusterlist.h,
	src/cerebrod/cerebrod_clusterlist.c,
	src/cerebrod/cerebrod_clusterlist_genders.c,
	src/cerebrod/cerebrod_clusterlist_gendersllnl.c,
	src/cerebrod/cerebrod_clusterlist_hostsfile.c: New files.

	* src/libcommon/Makefile.am, src/cerebrod/Makefile.am: Updated
	appropriately.

	* src/cerebrod/cerebrod.c (_cerebrod_initialization): Renamed to
	_cerebrod_pre_config_initialization.

	* src/cerebrod/cerebrod.c (_cerebrod_post_config_initialization):
	New function.

	* src/cerebrod/cerebrod.c (main): Added calls to new functions.

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c
	(_cerebrod_config_parse): Added support for clusterlist module
	configuration.

	* src/libcommon/wrappers.c (wrap_open, wrap_chdir): Added
	additional debugging info.

	* src/libcommon/wrappers.h, src/libcommon/wrappers.c (List_append,
	List_destroy, List_iterator_create, List_iterator_destroy,
	Hash_remove, Stat, Opendir, Closedir, Lt_dlopen, Lt_dlsym,
	Lt_dlclose, wrap_list_append, wrap_list_destroy,
	wrap_list_iterator_create, wrap_list_iterator_destroy,
	wrap_hash_remove, wrap_stat, wrap_opendir, wrap_closedir,
	wrap_lt_dlopen, wrap_lt_dlsym, wrap_lt_dlclose): New wrappers.
	
2005-02-16  Albert Chu  <chu11@llnl.gov>
	 
	* src/cerebrod/cerebrod_listener.c
	(_cerebrod_listener_create_and_setup_socket): Fix bind error,
	remove unnecessary setsockopt call.

	* src/cerebrod/cerebrod_listener.c (cerebrod_listener): Add
	additional parallelism.

	* src/cerebrod/cerebrod.c (main): Fix listener corner case.
	
2005-02-15  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_listener.c (cerebrod_listener),
	src/cerebrod/cerebrod_speaker.c (_cerebrod_speaker_initialize,
	cerebrod_speaker): Use recvfrom/sendto interface rather than
	read/write interface for sending packets.

	* src/cerebrod/cerebrod_listener.c
	(_cerebrod_listener_dump_cluster_node_data): Fix assert bug. Add
	hash count to output.

	* src/cerebrod/cerebrod_listener.c
	(_cerebrod_listener_dump_cluster_node_data_item): Fix pointer
	error.

	* src/cerebrod/cerebrod_listener.c (cerebrod_listener): Fix hash
	key buffering error.

	* src/libcommon/wrappers.h, src/libcommon/wrappers.c (Hash_count,
	wrap_hash_count): New functions and macros.

	* src/libcommon/wrappers.c (wrap_hash_insert): Add additional
	error check.

2005-02-14  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_config.c
	(_cerebrod_pre_calculate_configuration_config_check): Add
	listen_threads check.

	* src/cerebrod/cerebrod.c (main): Launch listen threads
	appropriately.

	* src/cerebrod/cerebrod_config.c
	(_cerebrod_calculate_configuration): Calculate destination ip
	inaddr in both listener and speaker mode.

	* src/cerebrod/cerebrod_speaker.c
	(_cerebrod_speaker_create_and_setup_socket),
	src/cerebrod/cerebrod_listener.c
	(_cerebrod_listener_create_and_setup_socket): Add memsets to
	ensure correct settings.

	* src/cerebrod/cerebrod_listener.c (cerebrod_listener): Fix buffer
	input error.
	
	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c,
	src/cerebrod/cerebrod_speaker.c, src/cerebrod_listener.c: Globally
	rename heartbeat_in_addr to heartbeat_network_interface_in_addr.
	Globally rename destination_in_addr to destination_ip_in_addr.
	
2005-02-09  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_listener.h,
	src/cerebrod/cerebrod_listener.c: Completed basic listener
	functionality.  Added rehashing of hash when hash is too large.
	Added cluster_node_data_hash debugging.

	* src/libcommon/wrappers.h, src/libcommon/wrappers.c: Added
	various hashing wrappers.

	* src/cerebrod/cerebrod_config.c: Added additional checks on
	unicast and listener.
	
2005-02-03  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_config.h, src/cerebrod_config.c: Renamed
	speak_ttl to heartbeat_ttl and merged two network interface
	configurations into one.

	* src/cerebrod/cerebrod_speaker.c,
	src/cerebrod/cerebrod_listener.c: Adjust to configuration changes.
	
2005-02-02  Albert Chu  <chu11@llnl.gov>

	* cerebro.spec.in: Fix rpm build problem.
	
2005-02-01  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c:
	Support listen_on_network_interface configuration and
	configuration calculation.  Fix configuration check corner cases.

	* src/cerebrod/cerebrod_listener.c: Continue work on listener.
	
2005-01-31  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c,
	src/cerebrod/cerebrod_speaker.c: Globally renamed speak_to_ip and
	speak_to_port to heartbeat_destination_ip and
	heartbeat_destination_port.  Removed listen_port configuration.
	Globally renamed speak_from_port to heartbeat_source_port.

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c:
	Begin listen_on_network_interface configuration option addition.
	
2005-01-23  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_listener.c: Begin work on cerebrod_listener

	* src/cerebrod/wrappers.h, src/cerebrod/wrappers.c (List_create,
	wrap_list_create, Hash_create, wrap_hash_create): New macros and
	functions.

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c
	(_cerebrod_config_default, _cerebrod_config_parse),
	src/cerebrod/cerebrod_speaker.c
	(_cerebrod_speaker_create_and_setup_socket): Add and use
	speak_to_port configuration option.
	
2005-01-22  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_speaker.c (cerebrod_speaker): Fix corner
	case for errno survival on writes and sleep_time.  Cleaned up
	code.

	* src/cerebrod/cerebrod_speaker.c
	(_cerebrod_speaker_create_and_setup_socket): Fix errno check
	corner case.

	* src/libcommon/hash.h, src/libcommon/hash.c,
	src/libcommon/list.h, src/libcommon/list.c,
	src/libcommon/thread.h, src/libcommon/thread.c: New files.

	* src/libcommon/Makefile.am: Update for new files.

	* src/cerebrod/cerebrod_listener.h,
	src/cerebrod/cerebrod_listener.c: New files.

	* src/cerebrod/Makefile.am: Update for new files.

2005-01-16  Albert Chu  <chu11@llnl.gov>
	
	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c
	(_cerebrod_config_default, _cerebrod_config_parse,
	_cerebrod_config_check), src/cerebrod_speaker.c
	(_cerebrod_speaker_create_and_setup_socket): Support ttl
	configuration option.
	
2005-01-15  Albert Chu  <chu11@llnl.gov>

	Add initial pthread support.

	* src/libcommon/wrappers.h, src/libcommon/wrappers.c
	(Pthread_create, Pthread_attr_init, Pthread_attr_destroy,
	Pthread_attr_setdetachstate, Pthread_mutex_lock,
	Pthread_mutex_trylock, Pthread_mutex_unlock, wrap_pthread_create,
	wrap_pthread_attr_init, wrap_pthread_attr_destroy,
	wrap_pthread_attr_setdetachstate, wrap_pthread_mutex_lock,
	wrap_pthread_mutex_trylock, wrap_pthread_mutex_unlock): New macros
	and functions.
	
	* src/cerebrod/cerebrod_daemon.h, src/cerebrod/cerebrod_daemon.c
	(cerebrod_daemon_init): Removed openlog call and progname parameter.

	* src/cerebrod/cerebrod.c (main): Fix error flags and call
	cerebrod_daemon_init to daemonize.  Pthread speaker.

	* src/cerebrod/cerebrod_speaker.h, src/cerebrod/cerebrod_speaker.c
	(cerebrod_speaker): Fix prototype to remove warnings.  Add code to
	survive various error conditions.

	* src/cerebrod/cerebrod_heartbeat.c (cerebrod_heartbeat_marshall):
	Change if statement check to assert.
	
	* src/cerebrod/cerebrod_heartbeat.c (cerebrod_heartbeat_unmarshall):
	Return -1 on errors instead of exitting.

	* src/cerebrod/cerebrod_speaker.c
	(_cerebrod_speaker_send_heartbeat): removed function.

	* src/cerebrod/cerebrod_speaker.c
	(_cerebrod_speaker_create_and_setup_socket): Fixed to aid in
	survival of error conditions.

	* src/cerebrod/cerebrod.c, src/cerebrod/cerebrod_heartbeat.c
	(cerebrod_heartbeat_dump), src/cerebrod/cerebrod_speaker.c
	(_cerebrod_speaker_dump_heartbeat): Added mutex locking for debug
	output.
	
	* configure.ac: Fix pthread building problem.
	
2005-01-09  Albert Chu  <chu11@llnl.gov>

	* src/libcommon/wrappers.h, src/libcommon/wrappers.c (Connect,
	wrap_connect): New macro and function.

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c
	(_cerebrod_config_default, _cerebrod_config_parse): Add support
	for listen_port configuration option.

	* src/cerebrod/cerebrod_heartbeat.c (cerebrod_heartbeat_marshall):
	Fixed parameter check error.

	* src/cerebrod/cerebrod.c (main): Call cerebrod_speaker.  Fix some
	error output logic errors on debugging.

	* src/cerebrod/cerebrod_speaker.c
	(_cerebrod_speaker_create_and_setup_socket, cerebrod_speaker):
	Complete initial speaker code.
	
2005-01-05  Albert Chu  <chu11@llnl.gov>

	* cerebro.spec.in, Makefile.am: Fix to get initial rpm build to work.

2005-01-02  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod.h, src/cerebrod/cerebrod_speaker.h,
	src/cerebrod/cerebrod_speaker.c: New files.

	* src/cerebrod/cerebrod_config.c
	(_cerebrod_calculated_heartbeat_frequency_ranged): New function.

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c
	(_cerebrod_config_parse, _cb_heartbeat_freq,
	_cerebrod_calculate_configuration): Support fixed frequency and
	ranged frequencies.

	* src/cerebrod/cerebrod_heartbeat.h,
	src/cerebrod/cerebrod_heartbeat.c (cerebrod_heartbeat_construct):
	New function.  Rename struct cerebrod_heartbeat_t to struct
	cerebrod_heartbeat.

	* src/libcommon/wrappers.h, src/libcommon/wrappers.c
	(Bind, wrap_bind): New macros and functions.

2005-01-01  Albert Chu  <chu11@llnl.gov>

	* configure.ac: Updated with threads and lsd defines.

	* config/acx_pthread.m4: New file.

	* src/cerebrod/cerebrod_heartbeat.h: Include new file.
	
	* src/cerebrod/cerebrod_boottime.h,
	src/cerebrod/cerebrod_boottime.c: Renamed to cerebrod_cache.h and
	cerebrod_cache.c.

	* src/cerebrod/cerebrod_cache.h, src/cerebrod/cerebrod_cache.c
	(cerebrod_get_starttime, cerebrod_cache_starttime,
	cerebrod_cache_boottime, cerebrod_cache_hostname,
	cerebrod_get_hostname): New functions.

	* src/cerebrod/cerebrod_heartbeat.h: Add program starttime to
	heartbeat.

	* src/cerebrod/cerebrod_heartbeat.c (cerebrod_heartbeat_marshall,
	cerebrod_heartbeat_unmarshall): Add starttime
	marshalling/unmarshalling.

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c
	(cerebrod_config): New function.

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c
	(cerebrod_config_default, cerebrod_cmdline_parse,
	cerebrod_config_parse, cerebrod_calculate_configuration): Made
	static and renamed to _cerebrod_config_default,
	_cerebrod_cmdline_parse, _cerebrod_config_parse,
	_cerebrod_calculate_configuration respectively.

	* src/cerebrod_config.c (_cerebrod_config_dump): New function.

	* src/cerebrod/Makefile.am: Update appropriately.
	
	* src/libcommon/wrappers.h, src/libcommon/wrappers.c
	(Gettimeofday, wrap_gettimeofday, Inet_pton, wrap_inet_pton, Time,
	wrap_time): New macros and functions.

2004-12-31  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_config.h, src/cerebrod/cerebrod_config.c:
	Modified to support singlecast as well as multicast configuration.
	Added configuration file checks and singlecast vs. multicast
	configuration detection.

	* src/libcommon/wrappers.c: Added asserts.
	
2004-12-23  Albert Chu  <chu11@llnl.gov>

	* src/cerebrod/cerebrod_config.c, src/cerebrod/cerebrod_daemon.c,
	src/cerebrod/cerebrod/heartbeat.c: Added asserts.
	
2004-11-16  Albert Chu  <chu11@llnl.gov>

	* Initial commit.
